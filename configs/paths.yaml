defaults:
  run_name: room_v2_context

raw:
  root_glob: "*.txt"
  root_exclude:
    - requirements.txt
    - PORTABLE_STATE.txt
  inbox_dir: data/raw/inbox
  organized_dir: data/raw/organized
  manifest_path: data/raw/manifest.json

processed:
  input_glob: data/raw/inbox/*.txt
  output_dir: data/processed
  preprocess:
    corpus_mode: context_windows
    context_turns: 16
    min_context_turns: 3
    sample_stride: 2
    session_gap_minutes: 180
    merge_same_speaker: true
    merge_gap_minutes: 3
    max_merged_chars: 400
    min_message_chars: 2
    min_target_chars: 10
    max_message_chars: 400
    drop_low_signal: true
    response_only_loss: true

checkpoints:
  root_dir: checkpoints

artifacts:
  dir: artifacts
  latest_model_name: model_latest.pt
  latest_model_enc_name: model_latest.enc
  model_info_name: model_info.json

publish:
  source_preference:
    - checkpoints/{run_name}/best.pt
    - checkpoints/{run_name}/latest.pt

archive:
  root_dir: data/archive
